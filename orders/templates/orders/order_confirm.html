{% extends '_base.html' %}

{% load i18n %}
{% load humanize %}
{% load static %}
{% load farsi_tags %}
{% load global_tags %}
{% load crispy_forms_tags %}

{% block title %}{% translate 'Order Confirmation' %}{% endblock %}

{% block mini_cart_icon %}{% include 'cart/mini_cart_icon_alone.html' %}{% endblock %}

{% block content %}

    <!-- Main Content Wrapper Start -->
    <div class="main-content-wrapper">
        <div class="page-content-inner">
            <div class="container-fluid pr--80">
                <div class="row pt--50 pt-md--40 pt-sm--20"></div>
                <div class="row pb--80 pb-md--60 pb-sm--40">

                    <div class="col-xl-5 offset-xl-1 col-lg-9 mt-md--40 pt-3">
                        <div class="order-details">
                            <div class="checkout-title mt--10">
                                <h2>{% trans 'Order Items' %}</h2>
                            </div>
                            <div class="table-content table-responsive mb--30">
                                <table class="table order-table order-table-2">
                                    <thead>
                                    <tr>
                                        <th></th>
                                        <th>{% trans 'Product' %}</th>
                                        <th>{% trans 'Price' %}</th>
                                        <th>{% trans 'Offer Price' %}</th>
                                        <th>{% trans 'Quantity' %}</th>
                                        <th>{% trans 'Total Price' %}</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for item in order.items.all %}
                                        {% with item.product_variant.product as product %}
                                            <tr>
                                                <td><img src="
                                                    {% if product.covers.exists %}{{ product.covers.first.cover.url }}
                                                    {% else %}{% static 'img/products/prod-9.jpg' %}{% endif %}"
                                                         alt="" width="50px" height="50px"></td>
                                                <th>{{ product.title }}</th>
                                                <td>{{ product.price|intcomma:False|number_farsi }} {% trans 'Toman' %}</td>
                                                <td>{{ product.offer_price|intcomma:False|number_farsi }} {% trans 'Toman' %}</td>
                                                <td>{{ item.quantity|number_farsi }}</td>
                                                <td>{{ product.offer_price|multiply:item.quantity|intcomma:False|number_farsi }} {% trans 'Toman' %}</td>
                                            </tr>
                                        {% endwith %}
                                    {% endfor %}
                                    </tbody>
                                    <tfoot>
                                    <tr class="cart-subtotal">
                                        <td></td>
                                        <th>{% trans 'Total with discount' %}</th>
                                        <td class="text-right money text-success">{{ order.get_total_price|intcomma:False|number_farsi }} {% trans 'Toman' %}</td>
                                    </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="col-xl-5 offset-xl-1 col-lg-6 mt-md--40 pt-3">
                        <div class="order-details">
                            <div class="checkout-title mt--10">
                                <h2>{% trans 'Your Informations' %}</h2>
                            </div>
                            <div class="table-content table-responsive mb--30">
                                <table class="table order-table order-table-2">
{#                                    <thead>#}
{#                                    <tr>#}
{#                                        <th></th>#}
{#                                        <th>{% trans 'Product' %}</th>#}
{#                                        <th>{% trans 'Price' %}</th>#}
{#                                        <th>{% trans 'Offer Price' %}</th>#}
{#                                        <th>{% trans 'Quantity' %}</th>#}
{#                                        <th>{% trans 'Total Price' %}</th>#}
{#                                    </tr>#}
{#                                    </thead>#}
                                    <tbody>
                                        <tr>
                                            <th>{% trans 'Full Name' %}</th>
                                            <td>{{ order.first_name }} {{ order.last_name }}</td>
                                        </tr>
                                        <tr>
                                            <th>{% trans 'Phone Number' %}</th>
                                            <td>{{ order.phone_number }}</td>
                                        </tr>
                                        <tr>
                                            <th>{% trans 'Address' %}</th>
                                            <td>{{ order.address }}</td>
                                        </tr>
                                        <tr>
                                            <th>{% trans 'Email' %}</th>
                                            <td>{{ order.email }}</td>
                                        </tr>
                                        <tr>
                                            <td>{% trans 'Notes' %}</td>
                                            <td>{{ order.notes }}</td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                    <tr class="cart-subtotal">
                                        <th>{% trans 'Order Price' %}</th>
                                        <td class="text-right money text-success">{{ order.get_total_price|intcomma:False|number_farsi }} {% trans 'Toman' %}</td>
                                    </tr>
                                    </tfoot>
                                </table>
                            </div>
                                <a href="{% url 'orders:order_update' order.id %}" class="btn btn-secondary">{% trans 'Change Information' %}</a>
                        </div>
                    </div>

                    <div class="order-details col-sm-5 text-center pt--1">
                        <h2 class="py-5 ">{% trans 'Checkout gates' %}</h2>
                        <form action="" method="POST" class="payment-form">
                            {% csrf_token %}
                            <div class="payment-group mb--10">
                                <div class="payment-radio pb-5">
                                    <input type="radio" value="bank" name="payment-method" id="bank" checked>
                                    <label class="payment-label"
                                           for="cheque">{% trans 'Zarinpal Secure Payment Gate' %}</label>
                                </div>
                                <button type="submit"
                                        class="btn btn-fullwidth btn-danger">{% trans 'Confirm and Checkout' %}</button>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
    <!-- Main Content Wrapper Start -->

{% endblock %}